<GroupChatScreen>:

    ScreenContainerLayout:

        TopEmptyScreenSpace:

        AppScreenLayout:

            AutomatShortStatusPanel:
                id: state_panel
                size_hint_x: 1
                statuses:
                    { None: 'group is currently inactive',
                    'DHT_READ?': 'fetching list of active message brokers',
                    'BROKERS?': 'connecting with message brokers',
                    'QUEUE?': 'group is connected, reading recent messages',
                    'IN_SYNC!': 'group is connected and synchronized',
                    'DISCONNECTED': 'group is disconnected',
                    'CLOSED': 'group is deactivated', }

            VerticalScrollView:
                id: chat_messages_view

                ChatContainerLayout:
                    id: chat_messages
                    size_hint_x: None
                    width: root.width - app.scroll_bar_width

            HorizontalLayout:
                size_hint: 1, None
                height: self.minimum_height
                pos_hint: {'bottom': 1}
                padding: dp(0), dp(0)

                DynamicHeightTextInput:
                    id: chat_input
                    size_hint_x: 1
                    text: ''

                RaisedIconButton:
                    id: chat_send_button
                    icon: 'send'
                    _radius: dp(0)
                    button_width: dp(32)
                    button_height: root.ids.chat_input.height
                    height: root.ids.chat_input.height
                    font_size: '12sp'
                    on_release: root.on_chat_send_button_clicked()

    CustomFloatingActionButtonSpeedDial:
        id: action_button
        data: {'account-plus': 'Invite people', }
        opening_time: 0.2
        hint_animation: True
        rotation_root_button: True
        root_button_anim: True
        label_text_color: app.color_white99
        color_icon_stack_button: app.color_white99
        color_icon_root_button: app.color_white99
        bg_color_root_button: app.theme_cls.accent_color
        bg_color_stack_button: app.theme_cls.accent_color
        bg_hint_color: app.theme_cls.accent_light
        callback: root.on_action_button_clicked
