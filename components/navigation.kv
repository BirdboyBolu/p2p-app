<ScreenManagement>:
    transition: NoTransition()


<NavButtonWrap@GridLayout>:
    spacing: 0
    padding: 0
    size_hint: None, None
    width: self.minimum_width
    height: self.minimum_height


<NavButtonBase@Button>:
    corner_radius: 2
	text_padding_x: 5
	text_padding_y: 5
	font_size: '15sp'
    width: self.texture_size[0] + dp(self.text_padding_x) * 2
    height: self.texture_size[1] + dp(self.text_padding_y) * 2
    size_hint: None, None
    background_color: 0,0,0,0
    color: 1,1,1,1
    disabled_color: .8,.8,.8,1
    background_disabled_normal: ''
    bg_normal: .1,.5,.8,1
    bg_pressed: .2,.6,.9,1
    bg_disabled: .3,.3,.3,1
    bg_normal_delta: .1
    bg_disabled_delta: .1


<NavButtonActive@NavButtonWrap>:
    cols: 1
    rows: 1
    padding: 0
    spacing: 0

    NavButtonBase:

        canvas.before:
            Color:
                rgba: self.bg_normal if (self.state == 'normal' and not root.selected) else self.bg_pressed 
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [self.corner_radius+1, self.corner_radius+1, self.corner_radius+1, self.corner_radius+1, ]
            Color:
                rgba: (self.bg_normal[0]+self.bg_normal_delta,self.bg_normal[1]+self.bg_normal_delta,self.bg_normal[2]+self.bg_normal_delta,1) if (self.state == 'normal' and not root.selected) else (self.bg_pressed[0]+self.bg_normal_delta,self.bg_pressed[1]+self.bg_normal_delta,self.bg_pressed[2]+self.bg_normal_delta,1)
            RoundedRectangle:
                pos: self.pos[0]+2, self.pos[1]+2
                size: self.size[0]-4, self.size[1]-4
                radius: [self.corner_radius, self.corner_radius, self.corner_radius, self.corner_radius, ]

	    text: root.nav_btn_text
        on_press: root.on_action_area_pressed()


<NavButtonClosable@NavButtonWrap>:
    cols: 2
    rows: 1
    padding: 0
    spacing: 0

    NavButtonBase:
    	id: inner_button

        canvas.before:
            Color:
                rgba: self.bg_normal if (self.state == 'normal' and not root.selected) else self.bg_pressed 
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [self.corner_radius+1, 0, 0, self.corner_radius+1, ]
            Color:
                rgba: (self.bg_normal[0]+self.bg_normal_delta,self.bg_normal[1]+self.bg_normal_delta,self.bg_normal[2]+self.bg_normal_delta,1) if (self.state == 'normal' and not root.selected) else (self.bg_pressed[0]+self.bg_normal_delta,self.bg_pressed[1]+self.bg_normal_delta,self.bg_pressed[2]+self.bg_normal_delta,1)
            RoundedRectangle:
                pos: self.pos[0]+2, self.pos[1]+2
                size: self.size[0]-2, self.size[1]-4
                radius: [self.corner_radius, 0, 0, self.corner_radius, ]

	    text: root.nav_btn_text
        on_press: root.on_action_area_pressed()

    Button:
        width: dp(21)
        height: root.ids.inner_button.texture_size[1] + dp(root.ids.inner_button.text_padding_y) * 2
        size_hint: None, None
        corner_radius: 2
        markup: True
        background_color: 0,0,0,0
        color: .3,.7,1,1
        disabled_color: .8,.8,.8,1
        background_disabled_normal: ''
        bg_normal: .1,.5,.8,1
        bg_pressed: .2,.6,.9,1
        bg_disabled: .3,.3,.3,1
        bg_normal_delta: 0
        bg_disabled_delta: .1

        canvas.before:
            Color:
                rgba: self.bg_normal 
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [0, self.corner_radius+1, self.corner_radius+1, 0, ]
            Color:
                rgba: (self.bg_normal[0]+self.bg_normal_delta,self.bg_normal[1]+self.bg_normal_delta,self.bg_normal[2]+self.bg_normal_delta,1) if self.state == 'normal' else (self.bg_pressed[0]+self.bg_normal_delta,self.bg_pressed[1]+self.bg_normal_delta,self.bg_pressed[2]+self.bg_normal_delta,1)
            RoundedRectangle:
                pos: self.pos[0]+2, self.pos[1]+2
                size: self.size[0]-4, self.size[1]-4
                radius: [0, self.corner_radius, self.corner_radius, 0, ]

        font_size: '15sp'
        text: fa_icon('times')
        on_release: root.on_close_area_pressed()
